<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Tiusella - Réservez</title>
    <link rel="stylesheet" href="style.css">
    <link href="css/mobiscroll.javascript.min.css" rel="stylesheet" />
<script src="js/mobiscroll.javascript.min.js"></script>
</head>
<body>

    <div class="mainTitle">
        <h1 id="title"><a href="index.html">A Tiusella</a></h1>
    </div>
    <div class="subTitle">
        <h3 id="subtitle">Tra mare e monti</h3>
    </div>

    <div class="line">
    <hr>
    </div>

    <div class="menu">
        <ul>
            <li><a href="index.html">Accueil</a></li>
            <li class="deroulant"><a href="#">La Maison</a>
                <ul class="sous">
                    <li><a href="casamaio.html">A Casa Maìo</a></li>
                    <li><a href="casetta.html">A Casetta</a></li>
                </ul>
            </li>
            <li><a href="booking.html">Réservez</a></li>
            <li><a href="found.html">Nous trouver</a></li>
            <li><a href="contact.html">Nous contacter</a></li>
        </ul>
    </div>

<hr id="supHero">
<div class="hero">

</div>
<div class="main">
    
    <div class="central">

      <div class="bookingCentralSubtitle">

            <h3>Réservez</h3>
            
            
        </div>

        <hr id="subtitleHr">

        <div class="md-calendar-booking">

            <div class="mbsc-form-group">
                <div class="mbsc-form-group-title"></div>
                <div id="demo-booking-multiple"></div>
            </div>
        </div>

        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quos ducimus eveniet alias obcaecati autem eligendi voluptates commodi est ut nemo! Qui minima consequatur debitis ex, saepe magni corrupti pariatur fugit.</p>
     
        

       

    </div>

    
</div>

<div class="footer">
    <ul>
        
        <li><a href="https://www.instagram.com/atiusella"><img src="src/free.png" alt="Instagram" srcset=""></a></li>
        <li><a href="https://www.facebook.com/atiusella"><img src="src/facebook.png" alt="Facebook" srcset=""></a></li>
        <li><a href="#">Livre d'or </a></li>
        <li>-</li>
        <li><a href="#">Conditions Générales de Vente </a></li>
        <li>-</li>
        <li>©A Tiusella 2021</li>
    </ul>
   
</div>

<script>

mobiscroll.setOptions({
    locale: mobiscroll.localeFr,
    theme: 'ios',
    themeVariant: 'light'
});

var min = '2021-09-11T00:00';
var max = '2022-03-11T00:00';

mobiscroll.datepicker('#demo-booking-single', {
    display: 'inline',
    controls: ['calendar'],
    min: min,
    max: max,
    pages: 'auto',
    onPageLoading: function (event, inst) {
        getPrices(event.firstDay, function callback(bookings) {
            inst.setOptions({
                labels: bookings.labels,
                invalid: bookings.invalid
            });
        });
    }
});

mobiscroll.datepicker('#demo-booking-datetime', {
    display: 'inline',
    controls: ['calendar', 'timegrid'],
    min: min,
    max: max,
    minTime: '08:00',
    maxTime: '19:59',
    stepMinute: 60,
    width: null,
    onPageLoading: function (event, inst) {
        getDatetimes(event.firstDay, function callback(bookings) {
            inst.setOptions({
                labels: bookings.labels,
                invalid: bookings.invalid
            });
        });
    }
});

mobiscroll.datepicker('#demo-booking-multiple', {
    display: 'inline',
    controls: ['calendar'],
    min: min,
    max: max,
    pages: 'auto',
    selectMultiple: true,
    onInit: function (event, inst) {
        inst.setVal([
            '2021-09-11T00:00',
            '2021-09-16T00:00',
            '2021-09-17T00:00'
        ], true);
    },
    onPageLoading: function (event, inst) {
        getBookings(event.firstDay, function callback(bookings) {
            inst.setOptions({
                labels: bookings.labels,
                invalid: bookings.invalid
            });
        });
    }
});

function getPrices(d, callback) {
    var invalid = [],
        labels = [];

    mobiscroll.util.http.getJson('https://trial.mobiscroll.com/getprices/?year=' + d.getFullYear() + '&month=' + d.getMonth(), function (bookings) {
        for (var i = 0; i < bookings.length; ++i) {
            var booking = bookings[i],
                d = new Date(booking.d);

            if (booking.price > 0) {
                labels.push({
                    start: d,
                    title: '$' + booking.price,
                    textColor: '#e1528f'
                });
            } else {
                invalid.push(d);
            }
        }
        callback({ labels: labels, invalid: invalid });
    }, 'jsonp');
}


function getDatetimes(day, callback) {
    var invalid = [];
    var labels = [];

    mobiscroll.util.http.getJson('https://trial.mobiscroll.com/getbookingtime/?year=' + day.getFullYear() + '&month=' + day.getMonth(), function (bookings) {
        for (var i = 0; i < bookings.length; ++i) {
            var booking = bookings[i];
            var bDate = new Date(booking.d);

            if (booking.nr > 0) {
                labels.push({
                    start: bDate,
                    title: booking.nr + ' SPOTS',
                    textColor: '#e1528f'
                });
                $.merge(invalid, booking.invalid);
            } else {
                invalid.push(bDate);
            }
        }
        callback({ labels: labels, invalid: invalid });
    }, 'jsonp');
}

function getBookings(d, callback) {
    var invalid = [],
        labels = [];

    mobiscroll.util.http.getJson('https://trial.mobiscroll.com/getbookings/?year=' + d.getFullYear() + '&month=' + d.getMonth(), function (bookings) {
        for (var i = 0; i < bookings.length; ++i) {
            var booking = bookings[i],
                d = new Date(booking.d);

            if (booking.nr > 0) {
                labels.push({
                    start: d,
                    title: booking.nr + ' SPOTS',
                    textColor: '#e1528f'
                });
            } else {
                invalid.push(d);
            }
        }
        callback({ labels: labels, invalid: invalid });
    }, 'jsonp');
}
</script>
    
</body>
</html>